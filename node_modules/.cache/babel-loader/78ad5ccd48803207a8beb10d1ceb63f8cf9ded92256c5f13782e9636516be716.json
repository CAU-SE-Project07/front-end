{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import api from'../api';import logoImage from'../assets/images/logo.png';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const Header=()=>{const[isLoggedIn,setIsLoggedIn]=useState(false);const[userId,setUserId]=useState('');const[userInfo,setUserInfo]=useState(null);const[showDropdown,setShowDropdown]=useState(false);const dropdownRef=useRef(null);const navigate=useNavigate();useEffect(()=>{const user=JSON.parse(localStorage.getItem('user'));if(user&&user.userId){setIsLoggedIn(true);setUserId(user.userId);fetchUserInfo(user.userId);}},[]);const fetchUserInfo=async userId=>{try{const response=await api.get(\"/member/\".concat(userId));console.log('API 응답 데이터:',response.data);// API 응답 데이터 확인\nsetUserInfo(response.data);}catch(error){console.error('유저 정보 불러오기 실패:',error);}};const handleLogout=()=>{localStorage.removeItem('user');setIsLoggedIn(false);setUserId('');setUserInfo(null);navigate('/');};const toggleDropdown=()=>{setShowDropdown(!showDropdown);};const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setShowDropdown(false);}};useEffect(()=>{document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"header\",{className:\"w-full h-20 bg-blue-900 text-white flex items-center justify-between px-4 fixed top-0 left-0 z-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{src:logoImage,alt:\"logo\",className:\"h-44 w-44 p-6\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:isLoggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'white',cursor:'pointer'},onClick:toggleDropdown,children:userId}),showDropdown&&userInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white text-black rounded-lg shadow-lg py-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-black\",children:userInfo.userId}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-black\",children:userInfo.email}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-300\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-black\",children:userInfo.userRoles})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-white hover:text-gray-300\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-white hover:text-gray-300\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"text-white hover:text-gray-300\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})]})})]});};","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","api","logoImage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","isLoggedIn","setIsLoggedIn","userId","setUserId","userInfo","setUserInfo","showDropdown","setShowDropdown","dropdownRef","navigate","user","JSON","parse","localStorage","getItem","fetchUserInfo","response","get","concat","console","log","data","error","handleLogout","removeItem","toggleDropdown","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","children","to","src","alt","ref","style","color","cursor","onClick","email","userRoles"],"sources":["/Users/2unnhi/Desktop/프로젝트/se-project07-front/src/components/Header.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport logoImage from '../assets/images/logo.png';\n\nexport const Header = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userId, setUserId] = useState('');\n  const [userInfo, setUserInfo] = useState(null);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user'));\n    if (user && user.userId) {\n      setIsLoggedIn(true);\n      setUserId(user.userId);\n      fetchUserInfo(user.userId);\n    }\n  }, []);\n\n  const fetchUserInfo = async (userId) => {\n    try {\n      const response = await api.get(`/member/${userId}`);\n      console.log('API 응답 데이터:', response.data); // API 응답 데이터 확인\n      setUserInfo(response.data);\n    } catch (error) {\n      console.error('유저 정보 불러오기 실패:', error);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('user');\n    setIsLoggedIn(false);\n    setUserId('');\n    setUserInfo(null);\n    navigate('/');\n  };\n\n  const toggleDropdown = () => {\n    setShowDropdown(!showDropdown);\n  };\n\n  const handleClickOutside = (event) => {\n    if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n      setShowDropdown(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <header className=\"w-full h-20 bg-blue-900 text-white flex items-center justify-between px-4 fixed top-0 left-0 z-10\">\n      <div className=\"flex items-center\">\n        <Link to=\"/\" className=\"cursor-pointer\">\n          <img src={logoImage} alt=\"logo\" className=\"h-44 w-44 p-6\" />\n        </Link>\n      </div>\n      <div className=\"flex items-center space-x-4\">\n        {isLoggedIn ? (\n          <>\n            <div className=\"relative\" ref={dropdownRef}>\n              <span\n                style={{ color: 'white', cursor: 'pointer' }}\n                onClick={toggleDropdown}\n              >\n                {userId}\n              </span>\n              {showDropdown && userInfo && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white text-black rounded-lg shadow-lg py-2\">\n                  <div className=\"px-4 py-2 text-black\">{userInfo.userId}</div>\n                  <div className=\"px-4 py-2 text-black\">{userInfo.email}</div>\n                  <div className=\"border-t border-gray-300\"></div>\n                  <div className=\"px-4 py-2 text-black\">{userInfo.userRoles}</div>\n                </div>\n              )}\n            </div>\n            <button onClick={handleLogout} className=\"text-white hover:text-gray-300\">로그아웃</button>\n          </>\n        ) : (\n          <>\n            <Link to=\"/login\" className=\"text-white hover:text-gray-300\">로그인</Link>\n            <Link to=\"/signup\" className=\"text-white hover:text-gray-300\">회원가입</Link>\n          </>\n        )}\n      </div>\n    </header>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}